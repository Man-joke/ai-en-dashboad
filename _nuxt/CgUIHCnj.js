import{m as Ie,V as ce}from"./BsmJpVpv.js";import{U as z,aT as Ve,W as J,al as oe,ah as Ae,c as R,r as H,aj as De,aq as B,ai as Ee,b5 as Re,H as U,$ as M,z as f,a1 as se,b6 as de,b7 as Oe,aU as fe,N as W,aY as Fe,F as ve,ax as we,a$ as ne,b8 as Be,ad as ue,ag as Me,Z as Le,b9 as Ue,a0 as G,o as _e,a2 as He,aX as Ke,ba as Ne,B as qe,ao as ze,bb as me}from"./Cu3nRdIJ.js";import{u as $e}from"./CKSsIFbn.js";import{f as be}from"./DWGaNmQL.js";import{m as je,u as We,V as Xe,a as pe}from"./E5Yss7rt.js";import{m as Ye}from"./D97VQcr-.js";import{m as Ze,V as ke,u as Ge,a as he,b as ge,g as Je}from"./oNeYDdYL.js";import{V as Se}from"./BREB3W0C.js";import{u as Q}from"./B27fAMdE.js";import{m as Pe}from"./Cms8BFiK.js";import{a as Ce}from"./B47fbA8T.js";import{a as Qe,b as et}from"./DU3oUj5Q.js";import{V as tt}from"./B3dXd-41.js";import{V as lt}from"./B_BmZxHr.js";import{V as ye}from"./j2C2XfU6.js";import{a as nt}from"./DGLnQU1W.js";const at=z({id:String,...Ve(Ze({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ke}}),["absolute"])},"VMenu"),ot=J()({name:"VMenu",props:at(),emits:{"update:modelValue":e=>!0},setup(e,v){let{slots:n}=v;const r=oe(e,"modelValue"),{scopeId:i}=Ge(),m=Ae(),w=R(()=>e.id||`v-menu-${m}`),o=H(),l=De(he,null),V=B(0);Ee(he,{register(){++V.value},unregister(){--V.value},closeParents(u){setTimeout(()=>{!V.value&&(u==null||u&&!Re(u,o.value.contentEl))&&(r.value=!1,l==null||l.closeParents())},40)}});async function D(u){var g,F,x;const s=u.relatedTarget,h=u.target;await se(),r.value&&s!==h&&((g=o.value)!=null&&g.contentEl)&&((F=o.value)!=null&&F.globalTop)&&![document,o.value.contentEl].includes(h)&&!o.value.contentEl.contains(h)&&((x=de(o.value.contentEl)[0])==null||x.focus())}U(r,u=>{u?(l==null||l.register(),document.addEventListener("focusin",D,{once:!0})):(l==null||l.unregister(),document.removeEventListener("focusin",D))});function O(u){l==null||l.closeParents(u)}function d(u){var s,h,g;e.disabled||(u.key==="Tab"||u.key==="Enter"&&!e.closeOnContentClick?(u.key==="Enter"&&u.preventDefault(),Oe(de((s=o.value)==null?void 0:s.contentEl,!1),u.shiftKey?"prev":"next",x=>x.tabIndex>=0)||(r.value=!1,(g=(h=o.value)==null?void 0:h.activatorEl)==null||g.focus())):["Enter"," "].includes(u.key)&&e.closeOnContentClick&&(r.value=!1,l==null||l.closeParents()))}function P(u){var h;if(e.disabled)return;const s=(h=o.value)==null?void 0:h.contentEl;s&&r.value?u.key==="ArrowDown"?(u.preventDefault(),fe(s,"next")):u.key==="ArrowUp"&&(u.preventDefault(),fe(s,"prev")):["ArrowDown","ArrowUp"].includes(u.key)&&(r.value=!0,u.preventDefault(),setTimeout(()=>setTimeout(()=>P(u))))}const C=R(()=>M({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":w.value,onKeydown:P},e.activatorProps));return Q(()=>{const u=ge.filterProps(e);return f(ge,M({ref:o,id:w.value,class:["v-menu",e.class],style:e.style},u,{modelValue:r.value,"onUpdate:modelValue":s=>r.value=s,absolute:!0,activatorProps:C.value,"onClick:outside":O,onKeydown:d},i),{activator:n.activator,default:function(){for(var s=arguments.length,h=new Array(s),g=0;g<s;g++)h[g]=arguments[g];return f(Se,{root:"VMenu"},{default:()=>{var F;return[(F=n.default)==null?void 0:F.call(n,...h)]}})}})}),be({id:w,ΨopenChildren:V},o)}}),ut=z({renderless:Boolean,...Pe()},"VVirtualScrollItem"),st=J()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ut(),emits:{"update:height":e=>!0},setup(e,v){let{attrs:n,emit:r,slots:i}=v;const{resizeRef:m,contentRect:w}=Ce(void 0,"border");U(()=>{var o;return(o=w.value)==null?void 0:o.height},o=>{o!=null&&r("update:height",o)}),Q(()=>{var o,l;return e.renderless?f(W,null,[(o=i.default)==null?void 0:o.call(i,{itemRef:m})]):f("div",M({ref:m,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(l=i.default)==null?void 0:l.call(i)])})}}),rt=-1,it=1,ae=100,ct=z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function dt(e,v){const n=Fe(),r=B(0);ve(()=>{r.value=parseFloat(e.itemHeight||0)});const i=B(0),m=B(Math.ceil((parseInt(e.height)||n.height.value)/(r.value||16))||1),w=B(0),o=B(0),l=H(),V=H();let D=0;const{resizeRef:O,contentRect:d}=Ce();ve(()=>{O.value=l.value});const P=R(()=>{var t;return l.value===document.documentElement?n.height.value:((t=d.value)==null?void 0:t.height)||parseInt(e.height)||0}),C=R(()=>!!(l.value&&V.value&&P.value&&r.value));let u=Array.from({length:v.value.length}),s=Array.from({length:v.value.length});const h=B(0);let g=-1;function F(t){return u[t]||r.value}const x=Be(()=>{const t=performance.now();s[0]=0;const c=v.value.length;for(let k=1;k<=c-1;k++)s[k]=(s[k-1]||0)+F(k-1);h.value=Math.max(h.value,performance.now()-t)},h),$=U(C,t=>{t&&($(),D=V.value.offsetTop,x.immediate(),L(),~g&&se(()=>{ue&&window.requestAnimationFrame(()=>{Z(g),g=-1})}))});we(()=>{x.clear()});function ee(t,c){const k=u[t],b=r.value;r.value=b?Math.min(r.value,c):c,(k!==c||b!==r.value)&&(u[t]=c,x())}function T(t){return t=ne(t,0,v.value.length-1),s[t]||0}function X(t){return ft(s,t)}let K=0,_=0,j=0;U(P,(t,c)=>{c&&(L(),t<c&&requestAnimationFrame(()=>{_=0,L()}))});function te(){if(!l.value||!V.value)return;const t=l.value.scrollTop,c=performance.now();c-j>500?(_=Math.sign(t-K),D=V.value.offsetTop):_=t-K,K=t,j=c,L()}function N(){!l.value||!V.value||(_=0,j=0,L())}let Y=-1;function L(){cancelAnimationFrame(Y),Y=requestAnimationFrame(le)}function le(){if(!l.value||!P.value)return;const t=K-D,c=Math.sign(_),k=Math.max(0,t-ae),b=ne(X(k),0,v.value.length),p=t+P.value+ae,S=ne(X(p)+1,b+1,v.value.length);if((c!==rt||b<i.value)&&(c!==it||S>m.value)){const y=T(i.value)-T(b),I=T(S)-T(m.value);Math.max(y,I)>ae?(i.value=b,m.value=S):(b<=0&&(i.value=b),S>=v.value.length&&(m.value=S))}w.value=T(i.value),o.value=T(v.value.length)-T(m.value)}function Z(t){const c=T(t);!l.value||t&&!c?g=t:l.value.scrollTop=c}const a=R(()=>v.value.slice(i.value,m.value).map((t,c)=>({raw:t,index:c+i.value})));return U(v,()=>{u=Array.from({length:v.value.length}),s=Array.from({length:v.value.length}),x.immediate(),L()},{deep:!0}),{containerRef:l,markerRef:V,computedItems:a,paddingTop:w,paddingBottom:o,scrollToIndex:Z,handleScroll:te,handleScrollend:N,handleItemResize:ee}}function ft(e,v){let n=e.length-1,r=0,i=0,m=null,w=-1;if(e[n]<v)return n;for(;r<=n;)if(i=r+n>>1,m=e[i],m>v)n=i-1;else if(m<v)w=i,r=i+1;else return m===v?i:r;return w}const vt=z({items:{type:Array,default:()=>[]},renderless:Boolean,...ct(),...Pe(),...Qe()},"VVirtualScroll"),mt=J()({name:"VVirtualScroll",props:vt(),setup(e,v){let{slots:n}=v;const r=Me("VVirtualScroll"),{dimensionStyles:i}=et(e),{containerRef:m,markerRef:w,handleScroll:o,handleScrollend:l,handleItemResize:V,scrollToIndex:D,paddingTop:O,paddingBottom:d,computedItems:P}=dt(e,Le(e,"items"));return Ue(()=>e.renderless,()=>{function C(){var h,g;const s=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[s]("scroll",o,{passive:!0}),document[s]("scrollend",l)):((h=m.value)==null||h[s]("scroll",o,{passive:!0}),(g=m.value)==null||g[s]("scrollend",l))}_e(()=>{m.value=Je(r.vnode.el,!0),C(!0)}),we(C)}),Q(()=>{const C=P.value.map(u=>f(st,{key:u.index,renderless:e.renderless,"onUpdate:height":s=>V(u.index,s)},{default:s=>{var h;return(h=n.default)==null?void 0:h.call(n,{item:u.raw,index:u.index,...s})}}));return e.renderless?f(W,null,[f("div",{ref:w,class:"v-virtual-scroll__spacer",style:{paddingTop:G(O.value)}},null),C,f("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:G(d.value)}},null)]):f("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:l,style:[i.value,e.style]},[f("div",{ref:w,class:"v-virtual-scroll__container",style:{paddingTop:G(O.value),paddingBottom:G(d.value)}},[C])])}),{scrollToIndex:D}}});function pt(e,v){const n=B(!1);let r;function i(o){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function m(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const l=U(n,()=>{l(),o()})}else o()})}async function w(o){var D,O;if(o.key==="Tab"&&((D=v.value)==null||D.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const l=(O=e.value)==null?void 0:O.$el;if(!l)return;(o.key==="Home"||o.key==="End")&&l.scrollTo({top:o.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await m();const V=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const d=l.getBoundingClientRect().top;for(const P of V)if(P.getBoundingClientRect().top>=d){P.focus();break}}else{const d=l.getBoundingClientRect().bottom;for(const P of[...V].reverse())if(P.getBoundingClientRect().bottom<=d){P.focus();break}}}return{onListScroll:i,onListKeydown:w}}const ht=z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:He,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...je({itemChildren:!1})},"Select"),gt=z({...ht(),...Ve(Ie({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ye({transition:{component:ke}})},"VSelect"),Ft=J()({name:"VSelect",props:gt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,v){let{slots:n}=v;const{t:r}=Ke(),i=H(),m=H(),w=H(),o=oe(e,"menu"),l=R({get:()=>o.value,set:a=>{var t;o.value&&!a&&((t=m.value)!=null&&t.ΨopenChildren)||(o.value=a)}}),{items:V,transformIn:D,transformOut:O}=We(e),d=oe(e,"modelValue",[],a=>D(a===null?[null]:ze(a)),a=>{const t=O(a);return e.multiple?t:t[0]??null}),P=R(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),C=$e(),u=R(()=>d.value.map(a=>a.value)),s=B(!1),h=R(()=>l.value?e.closeText:e.openText);let g="",F;const x=R(()=>e.hideSelected?V.value.filter(a=>!d.value.some(t=>t===a)):V.value),$=R(()=>e.hideNoData&&!x.value.length||e.readonly||(C==null?void 0:C.isReadonly.value)),ee=R(()=>{var a;return{...e.menuProps,activatorProps:{...((a=e.menuProps)==null?void 0:a.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=H(),{onListScroll:X,onListKeydown:K}=pt(T,i);function _(a){e.openOnClear&&(l.value=!0)}function j(){$.value||(l.value=!l.value)}function te(a){var p,S;if(!a.key||e.readonly||C!=null&&C.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(l.value=!0),["Escape","Tab"].includes(a.key)&&(l.value=!1),a.key==="Home"?(p=T.value)==null||p.focus("first"):a.key==="End"&&((S=T.value)==null||S.focus("last"));const t=1e3;function c(y){const I=y.key.length===1,A=!y.ctrlKey&&!y.metaKey&&!y.altKey;return I&&A}if(e.multiple||!c(a))return;const k=performance.now();k-F>t&&(g=""),g+=a.key.toLowerCase(),F=k;const b=V.value.find(y=>y.title.toLowerCase().startsWith(g));if(b!==void 0){d.value=[b];const y=x.value.indexOf(b);ue&&window.requestAnimationFrame(()=>{var I;y>=0&&((I=w.value)==null||I.scrollToIndex(y))})}}function N(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!a.props.disabled)if(e.multiple){const c=d.value.findIndex(b=>e.valueComparator(b.value,a.value)),k=t??!~c;if(~c){const b=k?[...d.value,a]:[...d.value];b.splice(c,1),d.value=b}else k&&(d.value=[...d.value,a])}else{const c=t!==!1;d.value=c?[a]:[],se(()=>{l.value=!1})}}function Y(a){var t;(t=T.value)!=null&&t.$el.contains(a.relatedTarget)||(l.value=!1)}function L(){var a;s.value&&((a=i.value)==null||a.focus())}function le(a){s.value=!0}function Z(a){if(a==null)d.value=[];else if(me(i.value,":autofill")||me(i.value,":-webkit-autofill")){const t=V.value.find(c=>c.title===a);t&&N(t)}else i.value&&(i.value.value="")}return U(l,()=>{if(!e.hideSelected&&l.value&&d.value.length){const a=x.value.findIndex(t=>d.value.some(c=>e.valueComparator(c.value,t.value)));ue&&window.requestAnimationFrame(()=>{var t;a>=0&&((t=w.value)==null||t.scrollToIndex(a))})}}),U(()=>e.items,(a,t)=>{l.value||s.value&&!t.length&&a.length&&(l.value=!0)}),Q(()=>{const a=!!(e.chips||n.chip),t=!!(!e.hideNoData||x.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),c=d.value.length>0,k=ce.filterProps(e),b=c||!s.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return f(ce,M({ref:i},k,{modelValue:d.value.map(p=>p.props.value).join(", "),"onUpdate:modelValue":Z,focused:s.value,"onUpdate:focused":p=>s.value=p,validationValue:d.externalValue,counterValue:P.value,dirty:c,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:b,"onClick:clear":_,"onMousedown:control":j,onBlur:Y,onKeydown:te,"aria-label":r(h.value),title:r(h.value)}),{...n,default:()=>f(W,null,[f(ot,M({ref:m,modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,activator:"parent",contentClass:"v-select__content",disabled:$.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:L},ee.value),{default:()=>[t&&f(Xe,M({ref:T,selected:u.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:p=>p.preventDefault(),onKeydown:K,onFocusin:le,onScrollPassive:X,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var p,S,y;return[(p=n["prepend-item"])==null?void 0:p.call(n),!x.value.length&&!e.hideNoData&&(((S=n["no-data"])==null?void 0:S.call(n))??f(pe,{title:r(e.noDataText)},null)),f(mt,{ref:w,renderless:!0,items:x.value},{default:I=>{var ie;let{item:A,index:q,itemRef:E}=I;const re=M(A.props,{ref:E,key:q,onClick:()=>N(A,null)});return((ie=n.item)==null?void 0:ie.call(n,{item:A,index:q,props:re}))??f(pe,M(re,{role:"option"}),{prepend:xe=>{let{isSelected:Te}=xe;return f(W,null,[e.multiple&&!e.hideSelected?f(tt,{key:A.value,modelValue:Te,ripple:!1,tabindex:"-1"},null):void 0,A.props.prependAvatar&&f(lt,{image:A.props.prependAvatar},null),A.props.prependIcon&&f(ye,{icon:A.props.prependIcon},null)])}})}}),(y=n["append-item"])==null?void 0:y.call(n)]}})]}),d.value.map((p,S)=>{function y(E){E.stopPropagation(),E.preventDefault(),N(p,!1)}const I={"onClick:close":y,onKeydown(E){E.key!=="Enter"&&E.key!==" "||(E.preventDefault(),E.stopPropagation(),y(E))},onMousedown(E){E.preventDefault(),E.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},A=a?!!n.chip:!!n.selection,q=A?Ne(a?n.chip({item:p,index:S,props:I}):n.selection({item:p,index:S})):void 0;if(!(A&&!q))return f("div",{key:p.value,class:"v-select__selection"},[a?n.chip?f(Se,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:p.title}}},{default:()=>[q]}):f(nt,M({key:"chip",closable:e.closableChips,size:"small",text:p.title,disabled:p.props.disabled},I),null):q??f("span",{class:"v-select__selection-text"},[p.title,e.multiple&&S<d.value.length-1&&f("span",{class:"v-select__selection-comma"},[qe(",")])])])})]),"append-inner":function(){var I;for(var p=arguments.length,S=new Array(p),y=0;y<p;y++)S[y]=arguments[y];return f(W,null,[(I=n["append-inner"])==null?void 0:I.call(n,...S),e.menuIcon?f(ye,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),be({isFocused:s,menu:l,select:N},i)}});export{Ft as V};
